<h1>Editing Attendance Sheet</h1>

<%= form_tag("/sheets/#{params[:id]}", :remote => true, :method => :put, :id => "edit_assignments_with_date_#{params[:id]}") do %>
  <% if @assignments.any? %>
    <div class="field">
      <h2 class="large">Date: <%= @assignments[0].date %></h2>
    </div>
  <% end %>
  <% @assignments.each do |assignment| %>
    <%= hidden_field_tag "assignments[#{assignment.id}][assignment][date]", value = assignment.date %>
    <%= hidden_field_tag "assignments[#{assignment.id}][assignment][client_id]", value = assignment.client.id %>
    <div class="field">
      <span style="width:150px;float:left;margin-top:6px;"><%= assignment.client.name %></span>
      <span class="status_buttonset">
        <% ["Present", "Tardy", "Unexcused Absence", "Excused Absence", "School Closed", "Suspended"].each do |s| %>
          <%= label_tag "assignments_#{assignment.id}_assignment_status_#{s.sub(' ', '_')}", s %>
          <%= radio_button_tag id = "assignments_#{assignment.id}_assignment_status", s, check = s.eql?( assignment.status), { :name => "assignments[#{assignment.id}][assignment][status]" } %>
        <% end %>
      </span>
    </div>
  <% end %>
  <div class="actions">
    <%= submit_tag value = "Update sheet" %><span id="last_updated"></span>
  </div>
<% end %>
<%= link_to 'Back', sheets_path %>
